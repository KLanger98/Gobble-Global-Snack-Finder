
const filterByCountry = async () => {
    let countryOfChoice = document.querySelector('#countries').value;
    let categoryOfChoice = document.querySelector('#categories').value;

    let data = {};

    if(countryOfChoice != "Country"){
        data.country = countryOfChoice
    } else{
        data.country = null;
    }

    if(categoryOfChoice != "Category"){
        data.category = categoryOfChoice
    } else{
        data.category = null;
    }

    console.log(data)

    try {
        let response = await fetch('/browse', {
            method: 'POST',
            body: JSON.stringify({country: data.country, category: data.category}),
            headers: { 'Content-Type': 'application/json' }
        });

        if (!response.ok) {
            throw new Error('Network response was not ok');
        }

        // Assuming the server sends back HTML content generated by Handlebars
        let html = await response.text();

        // Update the document with the HTML content received from the server
        document.body.innerHTML = html;
    } catch (error) {
        console.error('Error filtering by country:', error);
    }
}

//let filter = document.querySelector('#submit-filters').addEventListener('click', filterByCountry)
